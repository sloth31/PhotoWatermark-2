
# 图片水印 macOS 应用产品需求文档 (PRD)

## 1. 文档概述

### 1.1 文档目的
本文档旨在明确定义“图片水印 macOS 应用”的功能、特性和用户体验目标。它将作为产品设计、开发、测试和项目管理的依据。

### 1.2 项目愿景
为 macOS 用户提供一款轻量、高效且易于使用的桌面应用程序，用于给单张或批量图片添加自定义水印。最终产品应以 `.app` 或 `.dmg` 格式分发，实现开箱即用。

### 1.3 目标用户
- **摄影师**：需要在发布作品前添加版权信息。
- **内容创作者/博主**：希望在社交媒体图片上打上自己的品牌 Logo 或标识。
- **小型企业主**：需要在产品图片上添加公司信息。
- **普通用户**：有偶尔给个人图片添加趣味文字或标记需求的个人。

---

## 2. 功能需求 (Functional Requirements)

### 2.1 文件处理

#### 2.1.1 导入图片
- **[P0]** **拖拽导入**：支持用户将单张或多张图片文件从 Finder 直接拖拽到应用窗口内进行导入。
- **[P0]** **文件选择器导入**：提供“选择图片”按钮，允许用户通过标准的文件选择器选择一张或多张图片。
- **[P0]** **文件夹导入**：提供“选择文件夹”按钮，导入指定文件夹内的所有支持格式的图片。
- **[P0]** **图片列表**：在主界面侧边栏或底部区域，以列表形式显示所有已导入的图片，每项包含缩略图和文件名。用户可以点击列表项切换当前预览的图片。

#### 2.1.2 支持格式
- **[P0]** **输入格式**：
    - 必须支持：JPEG, PNG (包括透明通道)。
    - 建议支持：BMP, TIFF。
- **[P0]** **输出格式**：
    - 用户可选择输出为 JPEG 或 PNG。

#### 2.1.3 导出图片
- **[P0]** **指定输出位置**：用户必须能指定一个用于存放处理后图片的输出文件夹。
- **[P0]** **防止覆盖**：默认情况下，禁止将图片导出到原始文件夹，以防止意外覆盖原图。用户需要手动选择其他文件夹。
- **[P0]** **命名规则**：提供以下导出文件命名选项：
    - 保留原文件名。
    - 添加自定义前缀 (例如 `wm_`)。
    - 添加自定义后缀 (例如 `_watermarked`)。
- **[P1]** **JPEG 质量调节 (可选)**：如果输出格式为 JPEG，提供一个从 0 到 100 的滑块，用于调节图片压缩质量。
- **[P1]** **图片尺寸调整 (可选)**：导出时，允许用户选择是否调整图片尺寸，并提供以下缩放选项：
    - 按宽度缩放（等比）。
    - 按高度缩放（等比）。
    - 按百分比缩放。

### 2.2 水印类型

#### 2.2.1 文本水印
- **[P0]** **自定义内容**：提供一个文本输入框，允许用户输入任意字符串作为水印内容。
- **[P0]** **透明度**：提供一个滑块（0-100%），用于调节文本水印的透明度。
- **[P1]** **字体样式 (可选)**：
    - **字体选择**：提供下拉菜单，列出当前系统已安装的字体供用户选择。
    - **字号**：允许用户输入或选择字号大小。
    - **样式**：提供“粗体”、“斜体”的开关选项。
- **[P1]** **颜色选择 (可选)**：提供一个调色板工具，让用户选择文本颜色。
- **[P2]** **高级样式 (可选)**：提供为文本添加阴影或描边效果的选项，并可调整阴影/描边的颜色和大小。

#### 2.2.2 图片水印 (可选高级功能)
- **[P1]** **图片选择**：允许用户从本地选择一张图片（如 Logo）作为水印。
- **[P1]** **PNG 透明支持**：必须正确处理并显示带透明通道的 PNG 图片水印。
- **[P1]** **缩放**：提供选项让用户按比例或自由调整图片水印的大小。
- **[P1]** **透明度**：提供一个滑块（0-100%），用于调节整个图片水印的透明度。

### 2.3 水印布局与样式

- **[P0]** **实时预览**：主界面需要有一个足够大的预览窗口。所有对水印的调整（内容、位置、大小、角度、透明度等）都必须实时反映在预览图上。
- **[P0]** **位置**：
    - **预设位置**：提供一个九宫格布局的快速选择器（如上左、上中、上右、中左、正中、中右、下左、下中、下右），用户可一键将水印放置在这些预设位置。
    - **手动拖拽**：用户可以在预览图上直接用鼠标按住并拖拽水印到任意位置。
- **[P2]** **旋转 (可选)**：提供一个滑块或输入框，允许用户以任意角度（0-360°）旋转水印。

### 2.4 配置管理

- **[P1]** **水印模板**：
    - **保存模板**：用户可以将当前的所有水印设置（包括水印类型、内容、字体、颜色、位置、大小、透明度、旋转角度等）保存为一个具名模板。
    - **管理模板**：用户可以加载、重命名或删除已保存的模板。
    - **自动加载**：提供设置选项，允许程序在启动时自动加载上一次关闭时的配置，或加载一个用户指定的默认模板。

---

## 3. 非功能需求 (Non-Functional Requirements)

### 3.1 性能
- **响应速度**：UI 操作应流畅，实时预览的延迟应在可接受范围内（< 200ms）。
- **处理效率**：批量处理图片时，应有合理的处理速度，并提供进度条或状态提示。

### 3.2 易用性
- **直观性**：界面布局应清晰直观，核心功能（导入、设置水印、导出）应一目了然。
- **用户引导**：首次启动时可提供简单的操作向导或提示。

### 3.3 平台兼容性
- **操作系统**：专为 macOS 设计，应确保在最近的两个 macOS 主版本上稳定运行。
- **打包与分发**：最终产品必须打包为独立的 `.app` 文件或包含 `.app` 的 `.dmg` 磁盘映像，用户无需安装额外依赖即可运行。

---

## 4. 优先级说明
- **[P0]**：核心功能，必须实现。
- **[P1]**：重要功能，强烈建议实现，可作为第一版发布后的迭代。
- **[P2]**：高级功能/锦上添花，可在产品成熟后考虑加入。
